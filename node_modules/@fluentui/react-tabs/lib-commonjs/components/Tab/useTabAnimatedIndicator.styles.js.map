{"version":3,"sources":["useTabAnimatedIndicator.styles.js"],"sourcesContent":["import * as React from 'react';\nimport { makeStyles, mergeClasses } from '@griffel/react';\nimport { useTabListContext_unstable } from '../TabList/TabListContext';\nimport { tokens } from '@fluentui/react-theme';\nimport { useAnimationFrame } from '@fluentui/react-utilities';\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst tabIndicatorCssVars_unstable = {\n    offsetVar: '--fui-Tab__indicator--offset',\n    scaleVar: '--fui-Tab__indicator--scale'\n};\nconst useActiveIndicatorStyles = makeStyles({\n    base: {\n        // overflow is required to allow the selection indicator to animate outside the tab area.\n        overflow: 'visible'\n    },\n    animated: {\n        '::after': {\n            transitionProperty: 'transform',\n            transitionDuration: `${tokens.durationSlow}`,\n            transitionTimingFunction: `${tokens.curveDecelerateMax}`\n        },\n        '@media (prefers-reduced-motion: reduce)': {\n            '::after': {\n                transitionProperty: 'none',\n                transitionDuration: '0.01ms'\n            }\n        }\n    },\n    horizontal: {\n        '::after': {\n            transformOrigin: 'left',\n            transform: `translateX(var(${tabIndicatorCssVars_unstable.offsetVar}))\n    scaleX(var(${tabIndicatorCssVars_unstable.scaleVar}))`\n        }\n    },\n    vertical: {\n        '::after': {\n            transformOrigin: 'top',\n            transform: `translateY(var(${tabIndicatorCssVars_unstable.offsetVar}))\n        scaleY(var(${tabIndicatorCssVars_unstable.scaleVar}))`\n        }\n    }\n});\nconst calculateTabRect = (element)=>{\n    if (element) {\n        var _element_parentElement;\n        const parentRect = ((_element_parentElement = element.parentElement) === null || _element_parentElement === void 0 ? void 0 : _element_parentElement.getBoundingClientRect()) || {\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0\n        };\n        const tabRect = element.getBoundingClientRect();\n        return {\n            x: tabRect.x - parentRect.x,\n            y: tabRect.y - parentRect.y,\n            width: tabRect.width,\n            height: tabRect.height\n        };\n    }\n    return undefined;\n};\nconst getRegisteredTabRect = (registeredTabs, value)=>{\n    var _registeredTabs_JSON_stringify;\n    const element = isValueDefined(value) ? (_registeredTabs_JSON_stringify = registeredTabs[JSON.stringify(value)]) === null || _registeredTabs_JSON_stringify === void 0 ? void 0 : _registeredTabs_JSON_stringify.ref.current : undefined;\n    return element ? calculateTabRect(element) : undefined;\n};\n// eslint-disable-next-line eqeqeq\nconst isValueDefined = (value)=>value != null;\n/**\n * Adds additional styling to the active tab selection indicator to create a sliding animation.\n */ export const useTabAnimatedIndicatorStyles_unstable = (state)=>{\n    const { disabled, selected, vertical } = state;\n    const activeIndicatorStyles = useActiveIndicatorStyles();\n    const [lastAnimatedFrom, setLastAnimatedFrom] = React.useState();\n    const [animationValues, setAnimationValues] = React.useState({\n        offset: 0,\n        scale: 1\n    });\n    const getRegisteredTabs = useTabListContext_unstable((ctx)=>ctx.getRegisteredTabs);\n    const [requestAnimationFrame] = useAnimationFrame();\n    if (selected) {\n        const { previousSelectedValue, selectedValue, registeredTabs } = getRegisteredTabs();\n        if (isValueDefined(previousSelectedValue) && lastAnimatedFrom !== previousSelectedValue) {\n            const previousSelectedTabRect = getRegisteredTabRect(registeredTabs, previousSelectedValue);\n            const selectedTabRect = getRegisteredTabRect(registeredTabs, selectedValue);\n            if (selectedTabRect && previousSelectedTabRect) {\n                const offset = vertical ? previousSelectedTabRect.y - selectedTabRect.y : previousSelectedTabRect.x - selectedTabRect.x;\n                const scale = vertical ? previousSelectedTabRect.height / selectedTabRect.height : previousSelectedTabRect.width / selectedTabRect.width;\n                setAnimationValues({\n                    offset,\n                    scale\n                });\n                setLastAnimatedFrom(previousSelectedValue);\n                // Reset the animation values after the animation is complete\n                requestAnimationFrame(()=>setAnimationValues({\n                        offset: 0,\n                        scale: 1\n                    }));\n            }\n        }\n    } else if (isValueDefined(lastAnimatedFrom)) {\n        // need to clear the last animated from so that if this tab is selected again\n        // from the same previous tab as last time, that animation still happens.\n        setLastAnimatedFrom(undefined);\n    }\n    // do not apply any animation if the tab is disabled\n    if (disabled) {\n        return state;\n    }\n    // the animation should only happen as the selection indicator returns to its\n    // original position and not when set at the previous tabs position.\n    const animating = animationValues.offset === 0 && animationValues.scale === 1;\n    state.root.className = mergeClasses(state.root.className, selected && activeIndicatorStyles.base, selected && animating && activeIndicatorStyles.animated, selected && (vertical ? activeIndicatorStyles.vertical : activeIndicatorStyles.horizontal));\n    const rootCssVars = {\n        [tabIndicatorCssVars_unstable.offsetVar]: `${animationValues.offset}px`,\n        [tabIndicatorCssVars_unstable.scaleVar]: `${animationValues.scale}`\n    };\n    state.root.style = {\n        ...rootCssVars,\n        ...state.root.style\n    };\n    return state;\n};\n"],"names":["useTabAnimatedIndicatorStyles_unstable","tabIndicatorCssVars_unstable","offsetVar","scaleVar","useActiveIndicatorStyles","__styles","base","B68tc82","Bmxbyg5","Bpg54ce","animated","Ba2ppi3","F2fol1","B1dyfl9","B0vmy72","u9bimw","horizontal","sjv3b2","b1kco5","vertical","d","p","m","calculateTabRect","element","_element_parentElement","parentRect","parentElement","getBoundingClientRect","x","y","width","height","tabRect","undefined","getRegisteredTabRect","registeredTabs","value","_registeredTabs_JSON_stringify","isValueDefined","JSON","stringify","ref","current","state","disabled","selected","activeIndicatorStyles","lastAnimatedFrom","setLastAnimatedFrom","React","useState","animationValues","setAnimationValues","offset","scale","getRegisteredTabs","useTabListContext_unstable","ctx","requestAnimationFrame","useAnimationFrame","previousSelectedValue","selectedValue","previousSelectedTabRect","selectedTabRect","animating","root","className","mergeClasses","rootCssVars","style"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}