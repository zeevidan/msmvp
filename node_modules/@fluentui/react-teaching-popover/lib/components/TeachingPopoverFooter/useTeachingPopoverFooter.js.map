{"version":3,"sources":["../src/components/TeachingPopoverFooter/useTeachingPopoverFooter.ts"],"sourcesContent":["import * as React from 'react';\nimport { getIntrinsicElementProps, mergeCallbacks, slot, useEventCallback } from '@fluentui/react-utilities';\nimport type { TeachingPopoverFooterProps, TeachingPopoverFooterState } from './TeachingPopoverFooter.types';\nimport { Button } from '@fluentui/react-button';\nimport { usePopoverContext_unstable } from '@fluentui/react-popover';\n\n/**\n * Returns the props and state required to render the component\n * @param props - TeachingPopoverFooter properties\n * @param ref - reference to root HTMLElement of TeachingPopoverFooter\n */\nexport const useTeachingPopoverFooter_unstable = (\n  props: TeachingPopoverFooterProps,\n  ref: React.Ref<HTMLDivElement>,\n): TeachingPopoverFooterState => {\n  const appearance = usePopoverContext_unstable(context => context.appearance);\n  const toggleOpen = usePopoverContext_unstable(context => context.toggleOpen);\n\n  const handleButtonClick = useEventCallback(\n    (event: React.MouseEvent<HTMLButtonElement & HTMLAnchorElement & HTMLDivElement>) => {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n\n      toggleOpen(event);\n    },\n  );\n\n  const secondary = slot.optional(props.secondary, {\n    defaultProps: {\n      appearance: appearance === 'brand' ? 'primary' : undefined,\n    },\n    renderByDefault: props.secondary !== undefined,\n    elementType: Button,\n  });\n\n  // Merge any provided callback with close trigger\n  if (secondary) {\n    secondary.onClick = mergeCallbacks(handleButtonClick, secondary?.onClick);\n  }\n\n  const primary = slot.always(props.primary, {\n    defaultProps: {\n      appearance: appearance === 'brand' ? undefined : 'primary',\n    },\n    elementType: Button,\n  });\n\n  // Primary button will close the popover if no secondary action is available.\n  if (!secondary) {\n    primary.onClick = mergeCallbacks(handleButtonClick, primary?.onClick);\n  }\n\n  return {\n    footerLayout: props.footerLayout ?? 'horizontal',\n    appearance,\n    components: {\n      root: 'div',\n      primary: Button,\n      secondary: Button,\n    },\n    root: slot.always(\n      getIntrinsicElementProps('div', {\n        ref,\n        ...props,\n      }),\n      { elementType: 'div' },\n    ),\n    secondary,\n    primary,\n  };\n};\n"],"names":["React","getIntrinsicElementProps","mergeCallbacks","slot","useEventCallback","Button","usePopoverContext_unstable","useTeachingPopoverFooter_unstable","props","ref","appearance","context","toggleOpen","handleButtonClick","event","isDefaultPrevented","secondary","optional","defaultProps","undefined","renderByDefault","elementType","onClick","primary","always","footerLayout","components","root"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,wBAAwB,EAAEC,cAAc,EAAEC,IAAI,EAAEC,gBAAgB,QAAQ,4BAA4B;AAE7G,SAASC,MAAM,QAAQ,yBAAyB;AAChD,SAASC,0BAA0B,QAAQ,0BAA0B;AAErE;;;;CAIC,GACD,OAAO,MAAMC,oCAAoC,CAC/CC,OACAC;IAEA,MAAMC,aAAaJ,2BAA2BK,CAAAA,UAAWA,QAAQD,UAAU;IAC3E,MAAME,aAAaN,2BAA2BK,CAAAA,UAAWA,QAAQC,UAAU;IAE3E,MAAMC,oBAAoBT,iBACxB,CAACU;QACC,IAAIA,MAAMC,kBAAkB,IAAI;YAC9B;QACF;QAEAH,WAAWE;IACb;IAGF,MAAME,YAAYb,KAAKc,QAAQ,CAACT,MAAMQ,SAAS,EAAE;QAC/CE,cAAc;YACZR,YAAYA,eAAe,UAAU,YAAYS;QACnD;QACAC,iBAAiBZ,MAAMQ,SAAS,KAAKG;QACrCE,aAAahB;IACf;IAEA,iDAAiD;IACjD,IAAIW,WAAW;QACbA,UAAUM,OAAO,GAAGpB,eAAeW,mBAAmBG,sBAAAA,gCAAAA,UAAWM,OAAO;IAC1E;IAEA,MAAMC,UAAUpB,KAAKqB,MAAM,CAAChB,MAAMe,OAAO,EAAE;QACzCL,cAAc;YACZR,YAAYA,eAAe,UAAUS,YAAY;QACnD;QACAE,aAAahB;IACf;IAEA,6EAA6E;IAC7E,IAAI,CAACW,WAAW;QACdO,QAAQD,OAAO,GAAGpB,eAAeW,mBAAmBU,oBAAAA,8BAAAA,QAASD,OAAO;IACtE;QAGgBd;IADhB,OAAO;QACLiB,cAAcjB,CAAAA,sBAAAA,MAAMiB,YAAY,cAAlBjB,iCAAAA,sBAAsB;QACpCE;QACAgB,YAAY;YACVC,MAAM;YACNJ,SAASlB;YACTW,WAAWX;QACb;QACAsB,MAAMxB,KAAKqB,MAAM,CACfvB,yBAAyB,OAAO;YAC9BQ;YACA,GAAGD,KAAK;QACV,IACA;YAAEa,aAAa;QAAM;QAEvBL;QACAO;IACF;AACF,EAAE"}