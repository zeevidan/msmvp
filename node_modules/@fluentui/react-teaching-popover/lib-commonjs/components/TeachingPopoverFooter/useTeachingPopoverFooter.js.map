{"version":3,"sources":["../src/components/TeachingPopoverFooter/useTeachingPopoverFooter.ts"],"sourcesContent":["import * as React from 'react';\nimport { getIntrinsicElementProps, mergeCallbacks, slot, useEventCallback } from '@fluentui/react-utilities';\nimport type { TeachingPopoverFooterProps, TeachingPopoverFooterState } from './TeachingPopoverFooter.types';\nimport { Button } from '@fluentui/react-button';\nimport { usePopoverContext_unstable } from '@fluentui/react-popover';\n\n/**\n * Returns the props and state required to render the component\n * @param props - TeachingPopoverFooter properties\n * @param ref - reference to root HTMLElement of TeachingPopoverFooter\n */\nexport const useTeachingPopoverFooter_unstable = (\n  props: TeachingPopoverFooterProps,\n  ref: React.Ref<HTMLDivElement>,\n): TeachingPopoverFooterState => {\n  const appearance = usePopoverContext_unstable(context => context.appearance);\n  const toggleOpen = usePopoverContext_unstable(context => context.toggleOpen);\n\n  const handleButtonClick = useEventCallback(\n    (event: React.MouseEvent<HTMLButtonElement & HTMLAnchorElement & HTMLDivElement>) => {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n\n      toggleOpen(event);\n    },\n  );\n\n  const secondary = slot.optional(props.secondary, {\n    defaultProps: {\n      appearance: appearance === 'brand' ? 'primary' : undefined,\n    },\n    renderByDefault: props.secondary !== undefined,\n    elementType: Button,\n  });\n\n  // Merge any provided callback with close trigger\n  if (secondary) {\n    secondary.onClick = mergeCallbacks(handleButtonClick, secondary?.onClick);\n  }\n\n  const primary = slot.always(props.primary, {\n    defaultProps: {\n      appearance: appearance === 'brand' ? undefined : 'primary',\n    },\n    elementType: Button,\n  });\n\n  // Primary button will close the popover if no secondary action is available.\n  if (!secondary) {\n    primary.onClick = mergeCallbacks(handleButtonClick, primary?.onClick);\n  }\n\n  return {\n    footerLayout: props.footerLayout ?? 'horizontal',\n    appearance,\n    components: {\n      root: 'div',\n      primary: Button,\n      secondary: Button,\n    },\n    root: slot.always(\n      getIntrinsicElementProps('div', {\n        ref,\n        ...props,\n      }),\n      { elementType: 'div' },\n    ),\n    secondary,\n    primary,\n  };\n};\n"],"names":["useTeachingPopoverFooter_unstable","props","ref","appearance","usePopoverContext_unstable","context","toggleOpen","handleButtonClick","useEventCallback","event","isDefaultPrevented","secondary","slot","optional","defaultProps","undefined","renderByDefault","elementType","Button","onClick","mergeCallbacks","primary","always","footerLayout","components","root","getIntrinsicElementProps"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAWaA;;;eAAAA;;;;iEAXU;gCAC0D;6BAE1D;8BACoB;AAOpC,MAAMA,oCAAoC,CAC/CC,OACAC;IAEA,MAAMC,aAAaC,IAAAA,wCAAAA,EAA2BC,CAAAA,UAAWA,QAAQF,UAAU;IAC3E,MAAMG,aAAaF,IAAAA,wCAAAA,EAA2BC,CAAAA,UAAWA,QAAQC,UAAU;IAE3E,MAAMC,oBAAoBC,IAAAA,gCAAAA,EACxB,CAACC;QACC,IAAIA,MAAMC,kBAAkB,IAAI;YAC9B;QACF;QAEAJ,WAAWG;IACb;IAGF,MAAME,YAAYC,oBAAAA,CAAKC,QAAQ,CAACZ,MAAMU,SAAS,EAAE;QAC/CG,cAAc;YACZX,YAAYA,eAAe,UAAU,YAAYY;QACnD;QACAC,iBAAiBf,MAAMU,SAAS,KAAKI;QACrCE,aAAaC,mBAAAA;IACf;IAEA,iDAAiD;IACjD,IAAIP,WAAW;QACbA,UAAUQ,OAAO,GAAGC,IAAAA,8BAAAA,EAAeb,mBAAmBI,cAAAA,QAAAA,cAAAA,KAAAA,IAAAA,KAAAA,IAAAA,UAAWQ,OAAO;IAC1E;IAEA,MAAME,UAAUT,oBAAAA,CAAKU,MAAM,CAACrB,MAAMoB,OAAO,EAAE;QACzCP,cAAc;YACZX,YAAYA,eAAe,UAAUY,YAAY;QACnD;QACAE,aAAaC,mBAAAA;IACf;IAEA,6EAA6E;IAC7E,IAAI,CAACP,WAAW;QACdU,QAAQF,OAAO,GAAGC,IAAAA,8BAAAA,EAAeb,mBAAmBc,YAAAA,QAAAA,YAAAA,KAAAA,IAAAA,KAAAA,IAAAA,QAASF,OAAO;IACtE;QAGgBlB;IADhB,OAAO;QACLsB,cAActB,CAAAA,sBAAAA,MAAMsB,YAAY,AAAZA,MAAY,QAAlBtB,wBAAAA,KAAAA,IAAAA,sBAAsB;QACpCE;QACAqB,YAAY;YACVC,MAAM;YACNJ,SAASH,mBAAAA;YACTP,WAAWO,mBAAAA;QACb;QACAO,MAAMb,oBAAAA,CAAKU,MAAM,CACfI,IAAAA,wCAAAA,EAAyB,OAAO;YAC9BxB;YACA,GAAGD,KAAK;QACV,IACA;YAAEgB,aAAa;QAAM;QAEvBN;QACAU;IACF;AACF"}