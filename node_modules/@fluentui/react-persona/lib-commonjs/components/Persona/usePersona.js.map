{"version":3,"sources":["../src/components/Persona/usePersona.ts"],"sourcesContent":["import * as React from 'react';\nimport { Avatar } from '@fluentui/react-avatar';\nimport { getIntrinsicElementProps, slot } from '@fluentui/react-utilities';\nimport { PresenceBadge } from '@fluentui/react-badge';\nimport type { PersonaProps, PersonaState } from './Persona.types';\n\n/**\n * Create the state required to render Persona.\n *\n * The returned state can be modified with hooks such as usePersonaStyles_unstable,\n * before being passed to renderPersona_unstable.\n *\n * @param props - props from this instance of Persona\n * @param ref - reference to root HTMLElement of Persona\n */\nexport const usePersona_unstable = (props: PersonaProps, ref: React.Ref<HTMLElement>): PersonaState => {\n  const { name, presenceOnly = false, size = 'medium', textAlignment = 'start', textPosition = 'after' } = props;\n\n  const primaryText = slot.optional(props.primaryText, {\n    renderByDefault: true,\n    defaultProps: {\n      children: name,\n    },\n    elementType: 'span',\n  });\n  const secondaryText = slot.optional(props.secondaryText, { elementType: 'span' });\n  const tertiaryText = slot.optional(props.tertiaryText, { elementType: 'span' });\n  const quaternaryText = slot.optional(props.quaternaryText, { elementType: 'span' });\n  const numTextLines = [primaryText, secondaryText, tertiaryText, quaternaryText].filter(Boolean).length;\n  return {\n    numTextLines,\n    presenceOnly,\n    size,\n    textAlignment,\n    textPosition,\n    components: {\n      root: 'div',\n      avatar: Avatar,\n      presence: PresenceBadge,\n      primaryText: 'span',\n      secondaryText: 'span',\n      tertiaryText: 'span',\n      quaternaryText: 'span',\n    },\n\n    root: slot.always(\n      getIntrinsicElementProps(\n        'div',\n        {\n          ...props,\n          // FIXME:\n          // `ref` is wrongly assigned to be `HTMLElement` instead of `HTMLDivElement`\n          // but since it would be a breaking change to fix it, we are casting ref to it's proper type\n          ref: ref as React.Ref<HTMLDivElement>,\n        },\n        /* excludedPropNames */ ['name'],\n      ),\n      { elementType: 'div' },\n    ),\n    avatar: !presenceOnly\n      ? slot.optional(props.avatar, {\n          renderByDefault: true,\n          defaultProps: {\n            name,\n            badge: props.presence,\n            size: avatarSizes[size],\n          },\n          elementType: Avatar,\n        })\n      : undefined,\n    presence: presenceOnly\n      ? slot.optional(props.presence, {\n          defaultProps: {\n            size: presenceSizes[size],\n          },\n          elementType: PresenceBadge,\n        })\n      : undefined,\n    primaryText,\n    secondaryText,\n    tertiaryText,\n    quaternaryText,\n  };\n};\n\nconst presenceSizes = {\n  'extra-small': 'tiny',\n  small: 'extra-small',\n  medium: 'small',\n  large: 'medium',\n  'extra-large': 'large',\n  huge: 'large',\n} as const;\n\nconst avatarSizes = {\n  'extra-small': 20,\n  small: 28,\n  medium: 32,\n  large: 36,\n  'extra-large': 40,\n  huge: 56,\n} as const;\n"],"names":["usePersona_unstable","props","ref","name","presenceOnly","size","textAlignment","textPosition","primaryText","slot","optional","renderByDefault","defaultProps","children","elementType","secondaryText","tertiaryText","quaternaryText","numTextLines","filter","Boolean","length","components","root","avatar","Avatar","presence","PresenceBadge","always","getIntrinsicElementProps","badge","avatarSizes","undefined","presenceSizes","small","medium","large","huge"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAeaA;;;eAAAA;;;;iEAfU;6BACA;gCACwB;4BACjB;AAYvB,MAAMA,sBAAsB,CAACC,OAAqBC;IACvD,MAAM,EAAEC,IAAI,EAAEC,eAAe,KAAK,EAAEC,OAAO,QAAQ,EAAEC,gBAAgB,OAAO,EAAEC,eAAe,OAAO,EAAE,GAAGN;IAEzG,MAAMO,cAAcC,oBAAAA,CAAKC,QAAQ,CAACT,MAAMO,WAAW,EAAE;QACnDG,iBAAiB;QACjBC,cAAc;YACZC,UAAUV;QACZ;QACAW,aAAa;IACf;IACA,MAAMC,gBAAgBN,oBAAAA,CAAKC,QAAQ,CAACT,MAAMc,aAAa,EAAE;QAAED,aAAa;IAAO;IAC/E,MAAME,eAAeP,oBAAAA,CAAKC,QAAQ,CAACT,MAAMe,YAAY,EAAE;QAAEF,aAAa;IAAO;IAC7E,MAAMG,iBAAiBR,oBAAAA,CAAKC,QAAQ,CAACT,MAAMgB,cAAc,EAAE;QAAEH,aAAa;IAAO;IACjF,MAAMI,eAAe;QAACV;QAAaO;QAAeC;QAAcC;KAAe,CAACE,MAAM,CAACC,SAASC,MAAM;IACtG,OAAO;QACLH;QACAd;QACAC;QACAC;QACAC;QACAe,YAAY;YACVC,MAAM;YACNC,QAAQC,mBAAAA;YACRC,UAAUC,yBAAAA;YACVnB,aAAa;YACbO,eAAe;YACfC,cAAc;YACdC,gBAAgB;QAClB;QAEAM,MAAMd,oBAAAA,CAAKmB,MAAM,CACfC,IAAAA,wCAAAA,EACE,OACA;YACE,GAAG5B,KAAK;YACR,SAAS;YACT,4EAA4E;YAC5E,4FAA4F;YAC5FC,KAAKA;QACP,GACA,qBAAqB,GAAG;YAAC;SAAO,GAElC;YAAEY,aAAa;QAAM;QAEvBU,QAAQ,CAACpB,eACLK,oBAAAA,CAAKC,QAAQ,CAACT,MAAMuB,MAAM,EAAE;YAC1Bb,iBAAiB;YACjBC,cAAc;gBACZT;gBACA2B,OAAO7B,MAAMyB,QAAQ;gBACrBrB,MAAM0B,WAAW,CAAC1B,KAAK;YACzB;YACAS,aAAaW,mBAAAA;QACf,KACAO;QACJN,UAAUtB,eACNK,oBAAAA,CAAKC,QAAQ,CAACT,MAAMyB,QAAQ,EAAE;YAC5Bd,cAAc;gBACZP,MAAM4B,aAAa,CAAC5B,KAAK;YAC3B;YACAS,aAAaa,yBAAAA;QACf,KACAK;QACJxB;QACAO;QACAC;QACAC;IACF;AACF;AAEA,MAAMgB,gBAAgB;IACpB,eAAe;IACfC,OAAO;IACPC,QAAQ;IACRC,OAAO;IACP,eAAe;IACfC,MAAM;AACR;AAEA,MAAMN,cAAc;IAClB,eAAe;IACfG,OAAO;IACPC,QAAQ;IACRC,OAAO;IACP,eAAe;IACfC,MAAM;AACR"}