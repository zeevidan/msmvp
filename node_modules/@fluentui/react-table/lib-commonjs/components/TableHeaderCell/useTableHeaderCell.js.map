{"version":3,"sources":["../src/components/TableHeaderCell/useTableHeaderCell.tsx"],"sourcesContent":["import * as React from 'react';\nimport { getIntrinsicElementProps, useMergedRefs, slot } from '@fluentui/react-utilities';\nimport { useFocusWithin } from '@fluentui/react-tabster';\nimport { ArrowUpRegular, ArrowDownRegular } from '@fluentui/react-icons';\nimport { ARIAButtonSlotProps, useARIAButtonProps } from '@fluentui/react-aria';\nimport type { TableHeaderCellProps, TableHeaderCellState } from './TableHeaderCell.types';\nimport { useTableContext } from '../../contexts/tableContext';\n\nconst sortIcons = {\n  ascending: <ArrowUpRegular fontSize={12} />,\n  descending: <ArrowDownRegular fontSize={12} />,\n};\n\n/**\n * Create the state required to render TableHeaderCell.\n *\n * The returned state can be modified with hooks such as useTableHeaderCellStyles_unstable,\n * before being passed to renderTableHeaderCell_unstable.\n *\n * @param props - props from this instance of TableHeaderCell\n * @param ref - reference to root HTMLElement of TableHeaderCell\n */\nexport const useTableHeaderCell_unstable = (\n  props: TableHeaderCellProps,\n  ref: React.Ref<HTMLElement>,\n): TableHeaderCellState => {\n  const { noNativeElements, sortable: contextSortable } = useTableContext();\n  const { sortable = contextSortable } = props;\n\n  const rootComponent = props.as ?? noNativeElements ? 'div' : 'th';\n\n  const buttonSlot = slot.always<ARIAButtonSlotProps>(props.button, {\n    elementType: 'div',\n    defaultProps: {\n      as: 'div',\n      ...(!sortable && {\n        role: 'presentation',\n        tabIndex: undefined,\n      }),\n    },\n  });\n\n  return {\n    components: {\n      root: rootComponent,\n      button: 'div',\n      sortIcon: 'span',\n      aside: 'span',\n    },\n    root: slot.always(\n      getIntrinsicElementProps(rootComponent, {\n        // FIXME:\n        // `ref` is wrongly assigned to be `HTMLElement` instead of `HTMLDivElement`\n        // but since it would be a breaking change to fix it, we are casting ref to it's proper type\n        ref: useMergedRefs(ref, useFocusWithin()) as React.Ref<HTMLDivElement>,\n        role: rootComponent === 'div' ? 'columnheader' : undefined,\n        'aria-sort': sortable ? props.sortDirection ?? 'none' : undefined,\n        ...props,\n      } as const),\n      { elementType: rootComponent },\n    ),\n    aside: slot.optional(props.aside, { elementType: 'span' }),\n    sortIcon: slot.optional(props.sortIcon, {\n      renderByDefault: !!props.sortDirection,\n      defaultProps: { children: props.sortDirection ? sortIcons[props.sortDirection] : undefined },\n      elementType: 'span',\n    }),\n    button: useARIAButtonProps(buttonSlot.as, buttonSlot),\n    sortable,\n    noNativeElements,\n  };\n};\n"],"names":["useTableHeaderCell_unstable","sortIcons","ascending","React","createElement","ArrowUpRegular","fontSize","descending","ArrowDownRegular","props","ref","noNativeElements","sortable","contextSortable","useTableContext","rootComponent","as","buttonSlot","slot","always","button","elementType","defaultProps","role","tabIndex","undefined","components","root","sortIcon","aside","getIntrinsicElementProps","useMergedRefs","useFocusWithin","sortDirection","optional","renderByDefault","children","useARIAButtonProps"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAsBaA;;;eAAAA;;;;iEAtBU;gCACuC;8BAC/B;4BACkB;2BACO;8BAExB;AAEhC,MAAMC,YAAY;IAChBC,WAAAA,WAAAA,GAAWC,OAAAC,aAAA,CAACC,0BAAAA,EAAAA;QAAeC,UAAU;;IACrCC,YAAAA,WAAAA,GAAYJ,OAAAC,aAAA,CAACI,4BAAAA,EAAAA;QAAiBF,UAAU;;AAC1C;AAWO,MAAMN,8BAA8B,CACzCS,OACAC;IAEA,MAAM,EAAEC,gBAAgB,EAAEC,UAAUC,eAAe,EAAE,GAAGC,IAAAA,6BAAAA;IACxD,MAAM,EAAEF,WAAWC,eAAe,EAAE,GAAGJ;QAEjBA;IAAtB,MAAMM,gBAAgBN,CAAAA,CAAAA,YAAAA,MAAMO,EAAE,AAAFA,MAAE,QAARP,cAAAA,KAAAA,IAAAA,YAAYE,gBAAAA,IAAmB,QAAQ;IAE7D,MAAMM,aAAaC,oBAAAA,CAAKC,MAAM,CAAsBV,MAAMW,MAAM,EAAE;QAChEC,aAAa;QACbC,cAAc;YACZN,IAAI;YACJ,GAAI,CAACJ,YAAY;gBACfW,MAAM;gBACNC,UAAUC;YACZ,CAAC;QACH;IACF;QAgB8BhB;IAd9B,OAAO;QACLiB,YAAY;YACVC,MAAMZ;YACNK,QAAQ;YACRQ,UAAU;YACVC,OAAO;QACT;QACAF,MAAMT,oBAAAA,CAAKC,MAAM,CACfW,IAAAA,wCAAAA,EAAyBf,eAAe;YACtC,SAAS;YACT,4EAA4E;YAC5E,4FAA4F;YAC5FL,KAAKqB,IAAAA,6BAAAA,EAAcrB,KAAKsB,IAAAA,4BAAAA;YACxBT,MAAMR,kBAAkB,QAAQ,iBAAiBU;YACjD,aAAab,WAAWH,CAAAA,uBAAAA,MAAMwB,aAAa,AAAbA,MAAa,QAAnBxB,yBAAAA,KAAAA,IAAAA,uBAAuB,SAASgB;YACxD,GAAGhB,KAAK;QACV,IACA;YAAEY,aAAaN;QAAc;QAE/Bc,OAAOX,oBAAAA,CAAKgB,QAAQ,CAACzB,MAAMoB,KAAK,EAAE;YAAER,aAAa;QAAO;QACxDO,UAAUV,oBAAAA,CAAKgB,QAAQ,CAACzB,MAAMmB,QAAQ,EAAE;YACtCO,iBAAiB,CAAC,CAAC1B,MAAMwB,aAAa;YACtCX,cAAc;gBAAEc,UAAU3B,MAAMwB,aAAa,GAAGhC,SAAS,CAACQ,MAAMwB,aAAa,CAAC,GAAGR;YAAU;YAC3FJ,aAAa;QACf;QACAD,QAAQiB,IAAAA,6BAAAA,EAAmBpB,WAAWD,EAAE,EAAEC;QAC1CL;QACAD;IACF;AACF"}