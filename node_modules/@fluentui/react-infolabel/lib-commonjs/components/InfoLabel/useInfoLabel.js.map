{"version":3,"sources":["../src/components/InfoLabel/useInfoLabel.ts"],"sourcesContent":["import * as React from 'react';\n\nimport { Label } from '@fluentui/react-label';\nimport { mergeCallbacks, useEventCallback, useId, slot } from '@fluentui/react-utilities';\nimport { InfoButton } from '../InfoButton/InfoButton';\nimport type { InfoLabelProps, InfoLabelState } from './InfoLabel.types';\n\n/**\n * Create the state required to render InfoLabel.\n *\n * The returned state can be modified with hooks such as useInfoLabelStyles_unstable,\n * before being passed to renderInfoLabel_unstable.\n *\n * @param props - props from this instance of InfoLabel\n * @param ref - reference to label element of InfoLabel\n */\nexport const useInfoLabel_unstable = (props: InfoLabelProps, ref: React.Ref<HTMLLabelElement>): InfoLabelState => {\n  const {\n    root: rootShorthand,\n    label: labelShorthand,\n    infoButton: infoButtonShorthand,\n    info,\n    size,\n    className,\n    style,\n    ...labelProps\n  } = props;\n  const baseId = useId('infolabel-');\n  const [open, setOpen] = React.useState(false);\n\n  const root = slot.always(rootShorthand, {\n    defaultProps: {\n      className,\n      style,\n    },\n    elementType: 'span',\n  });\n\n  const label = slot.always(labelShorthand, {\n    defaultProps: {\n      id: baseId + '__label',\n      ref,\n      size,\n      ...labelProps,\n    },\n    elementType: Label,\n  });\n\n  const infoButton = slot.optional(infoButtonShorthand, {\n    renderByDefault: !!info,\n    defaultProps: {\n      id: baseId + '__infoButton',\n      size,\n      info,\n    },\n    elementType: InfoButton,\n  });\n\n  const infoButtonPopover = slot.always(infoButton?.popover, {\n    elementType: 'div',\n  });\n  infoButtonPopover.onOpenChange = useEventCallback(\n    mergeCallbacks(infoButtonPopover.onOpenChange, (e, data) => {\n      setOpen(data.open);\n    }),\n  );\n\n  if (infoButton) {\n    infoButton.popover = infoButtonPopover;\n    const infoPopupId = baseId + '__info'; // used as a self-referencing aria-labelledby to name the popup\n    infoButton.info = slot.optional(infoButton?.info, {\n      defaultProps: {\n        id: infoPopupId,\n        'aria-labelledby': infoPopupId,\n      },\n      elementType: 'div',\n    });\n\n    infoButton['aria-labelledby'] ??= `${label.id} ${infoButton.id}`;\n\n    if (open) {\n      root['aria-owns'] ??= infoButton.info?.id;\n    }\n  }\n\n  return {\n    size,\n    components: {\n      root: 'span',\n      label: Label,\n      infoButton: InfoButton,\n    },\n    root,\n    label,\n    infoButton,\n  };\n};\n"],"names":["useInfoLabel_unstable","props","ref","root","rootShorthand","label","labelShorthand","infoButton","infoButtonShorthand","info","size","className","style","labelProps","baseId","useId","open","setOpen","React","useState","slot","always","defaultProps","elementType","id","Label","optional","renderByDefault","InfoButton","infoButtonPopover","popover","onOpenChange","useEventCallback","mergeCallbacks","e","data","_arialabelledby","infoPopupId","_","_ariaowns","_1","components"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAgBaA;;;eAAAA;;;;iEAhBU;4BAED;gCACwC;4BACnC;AAYpB,MAAMA,wBAAwB,CAACC,OAAuBC;IAC3D,MAAM,EACJC,MAAMC,aAAa,EACnBC,OAAOC,cAAc,EACrBC,YAAYC,mBAAmB,EAC/BC,IAAI,EACJC,IAAI,EACJC,SAAS,EACTC,KAAK,EACL,GAAGC,YACJ,GAAGZ;IACJ,MAAMa,SAASC,IAAAA,qBAAAA,EAAM;IACrB,MAAM,CAACC,MAAMC,QAAQ,GAAGC,OAAMC,QAAQ,CAAC;IAEvC,MAAMhB,OAAOiB,oBAAAA,CAAKC,MAAM,CAACjB,eAAe;QACtCkB,cAAc;YACZX;YACAC;QACF;QACAW,aAAa;IACf;IAEA,MAAMlB,QAAQe,oBAAAA,CAAKC,MAAM,CAACf,gBAAgB;QACxCgB,cAAc;YACZE,IAAIV,SAAS;YACbZ;YACAQ;YACA,GAAGG,UAAU;QACf;QACAU,aAAaE,iBAAAA;IACf;IAEA,MAAMlB,aAAaa,oBAAAA,CAAKM,QAAQ,CAAClB,qBAAqB;QACpDmB,iBAAiB,CAAC,CAAClB;QACnBa,cAAc;YACZE,IAAIV,SAAS;YACbJ;YACAD;QACF;QACAc,aAAaK,sBAAAA;IACf;IAEA,MAAMC,oBAAoBT,oBAAAA,CAAKC,MAAM,CAACd,eAAAA,QAAAA,eAAAA,KAAAA,IAAAA,KAAAA,IAAAA,WAAYuB,OAAO,EAAE;QACzDP,aAAa;IACf;IACAM,kBAAkBE,YAAY,GAAGC,IAAAA,gCAAAA,EAC/BC,IAAAA,8BAAAA,EAAeJ,kBAAkBE,YAAY,EAAE,CAACG,GAAGC;QACjDlB,QAAQkB,KAAKnB,IAAI;IACnB;IAGF,IAAIT,YAAY;YAWdA,aAAW6B;QAVX7B,WAAWuB,OAAO,GAAGD;QACrB,MAAMQ,cAAcvB,SAAS,UAAU,+DAA+D;QACtGP,WAAWE,IAAI,GAAGW,oBAAAA,CAAKM,QAAQ,CAACnB,eAAAA,QAAAA,eAAAA,KAAAA,IAAAA,KAAAA,IAAAA,WAAYE,IAAI,EAAE;YAChDa,cAAc;gBACZE,IAAIa;gBACJ,mBAAmBA;YACrB;YACAd,aAAa;QACf;;QAEAhB,CAAAA,IAAAA,CAAAA,cAAAA,UAAAA,CAAU,CAAC6B,kBAAA,kBAAkB,AAAlB,MAAkB,QAAAE,MAAA,KAAA,IAAAA,IAA7B/B,WAAU,CAAC6B,gBAAkB,GAAK,CAAC,EAAE/B,MAAMmB,EAAE,CAAC,CAAC,EAAEjB,WAAWiB,EAAE,CAAC,CAAC;QAEhE,IAAIR,MAAM;gBACcT;gBAAtBJ,OAAKoC;;YAALpC,CAAAA,KAAAA,CAAAA,QAAAA,IAAAA,CAAI,CAACoC,YAAA,YAAY,AAAZ,MAAY,QAAAC,OAAA,KAAA,IAAAA,KAAjBrC,KAAI,CAACoC,UAAY,GAAA,AAAKhC,CAAAA,mBAAAA,WAAWE,IAAI,AAAJA,MAAI,QAAfF,qBAAAA,KAAAA,IAAAA,KAAAA,IAAAA,iBAAiBiB,EAAE;QAC3C;IACF;IAEA,OAAO;QACLd;QACA+B,YAAY;YACVtC,MAAM;YACNE,OAAOoB,iBAAAA;YACPlB,YAAYqB,sBAAAA;QACd;QACAzB;QACAE;QACAE;IACF;AACF"}