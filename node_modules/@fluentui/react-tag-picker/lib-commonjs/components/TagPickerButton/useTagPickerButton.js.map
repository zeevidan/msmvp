{"version":3,"sources":["../src/components/TagPickerButton/useTagPickerButton.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useActiveDescendantContext } from '@fluentui/react-aria';\nimport type { TagPickerButtonProps, TagPickerButtonState } from './TagPickerButton.types';\nimport { useTagPickerContext_unstable } from '../../contexts/TagPickerContext';\nimport { useButtonTriggerSlot } from '@fluentui/react-combobox';\n\n/**\n * Create the state required to render PickerButton.\n *\n * The returned state can be modified with hooks such as usePickerButtonStyles_unstable,\n * before being passed to renderPickerButton_unstable.\n *\n * @param props - props from this instance of PickerButton\n * @param ref - reference to root HTMLDivElement of PickerButton\n */\nexport const useTagPickerButton_unstable = (\n  props: TagPickerButtonProps,\n  ref: React.Ref<HTMLButtonElement>,\n): TagPickerButtonState => {\n  const { controller: activeDescendantController } = useActiveDescendantContext();\n  const triggerRef = useTagPickerContext_unstable(ctx => ctx.triggerRef);\n  const open = useTagPickerContext_unstable(ctx => ctx.open);\n  const value = useTagPickerContext_unstable(ctx => ctx.value);\n  const hasSelectedOption = useTagPickerContext_unstable(ctx => ctx.selectedOptions.length > 0);\n  const popoverId = useTagPickerContext_unstable(ctx => ctx.popoverId);\n  const getOptionById = useTagPickerContext_unstable(ctx => ctx.getOptionById);\n  const selectOption = useTagPickerContext_unstable(ctx => ctx.selectOption);\n  const setHasFocus = useTagPickerContext_unstable(ctx => ctx.setHasFocus);\n  const setOpen = useTagPickerContext_unstable(ctx => ctx.setOpen);\n\n  // casting is required here as triggerRef can either be button or input,\n  // but in this case we can assure it's a button\n  const root = useButtonTriggerSlot(props, triggerRef as React.RefObject<HTMLButtonElement>, {\n    activeDescendantController,\n    defaultProps: {\n      type: 'button',\n      tabIndex: 0,\n      children: value || props.placeholder,\n      'aria-controls': open ? popoverId : undefined,\n      ref,\n    },\n    state: {\n      getOptionById,\n      open,\n      selectOption,\n      setHasFocus,\n      setOpen,\n      multiselect: true,\n    },\n  });\n\n  const size = useTagPickerContext_unstable(ctx => ctx.size);\n\n  const state: TagPickerButtonState = {\n    components: {\n      root: 'button',\n    },\n    root,\n    size,\n    hasSelectedOption,\n  };\n\n  return state;\n};\n"],"names":["useTagPickerButton_unstable","props","ref","controller","activeDescendantController","useActiveDescendantContext","triggerRef","useTagPickerContext_unstable","ctx","open","value","hasSelectedOption","selectedOptions","length","popoverId","getOptionById","selectOption","setHasFocus","setOpen","root","useButtonTriggerSlot","defaultProps","type","tabIndex","children","placeholder","undefined","state","multiselect","size","components"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAeaA;;;eAAAA;;;;iEAfU;2BACoB;kCAEE;+BACR;AAW9B,MAAMA,8BAA8B,CACzCC,OACAC;IAEA,MAAM,EAAEC,YAAYC,0BAA0B,EAAE,GAAGC,IAAAA,qCAAAA;IACnD,MAAMC,aAAaC,IAAAA,8CAAAA,EAA6BC,CAAAA,MAAOA,IAAIF,UAAU;IACrE,MAAMG,OAAOF,IAAAA,8CAAAA,EAA6BC,CAAAA,MAAOA,IAAIC,IAAI;IACzD,MAAMC,QAAQH,IAAAA,8CAAAA,EAA6BC,CAAAA,MAAOA,IAAIE,KAAK;IAC3D,MAAMC,oBAAoBJ,IAAAA,8CAAAA,EAA6BC,CAAAA,MAAOA,IAAII,eAAe,CAACC,MAAM,GAAG;IAC3F,MAAMC,YAAYP,IAAAA,8CAAAA,EAA6BC,CAAAA,MAAOA,IAAIM,SAAS;IACnE,MAAMC,gBAAgBR,IAAAA,8CAAAA,EAA6BC,CAAAA,MAAOA,IAAIO,aAAa;IAC3E,MAAMC,eAAeT,IAAAA,8CAAAA,EAA6BC,CAAAA,MAAOA,IAAIQ,YAAY;IACzE,MAAMC,cAAcV,IAAAA,8CAAAA,EAA6BC,CAAAA,MAAOA,IAAIS,WAAW;IACvE,MAAMC,UAAUX,IAAAA,8CAAAA,EAA6BC,CAAAA,MAAOA,IAAIU,OAAO;IAE/D,wEAAwE;IACxE,+CAA+C;IAC/C,MAAMC,OAAOC,IAAAA,mCAAAA,EAAqBnB,OAAOK,YAAkD;QACzFF;QACAiB,cAAc;YACZC,MAAM;YACNC,UAAU;YACVC,UAAUd,SAAST,MAAMwB,WAAW;YACpC,iBAAiBhB,OAAOK,YAAYY;YACpCxB;QACF;QACAyB,OAAO;YACLZ;YACAN;YACAO;YACAC;YACAC;YACAU,aAAa;QACf;IACF;IAEA,MAAMC,OAAOtB,IAAAA,8CAAAA,EAA6BC,CAAAA,MAAOA,IAAIqB,IAAI;IAEzD,MAAMF,QAA8B;QAClCG,YAAY;YACVX,MAAM;QACR;QACAA;QACAU;QACAlB;IACF;IAEA,OAAOgB;AACT"}