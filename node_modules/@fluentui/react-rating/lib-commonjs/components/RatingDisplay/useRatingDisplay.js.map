{"version":3,"sources":["../src/components/RatingDisplay/useRatingDisplay.tsx"],"sourcesContent":["import * as React from 'react';\nimport { getIntrinsicElementProps, slot, useId } from '@fluentui/react-utilities';\nimport type { RatingDisplayProps, RatingDisplayState } from './RatingDisplay.types';\nimport { StarFilled } from '@fluentui/react-icons';\nimport { RatingItem } from '../RatingItem/RatingItem';\n\n/**\n * Create the state required to render RatingDisplay.\n *\n * The returned state can be modified with hooks such as useRatingDisplayStyles_unstable,\n * before being passed to renderRatingDisplay_unstable.\n *\n * @param props - props from this instance of RatingDisplay\n * @param ref - reference to root HTMLDivElement of RatingDisplay\n */\nexport const useRatingDisplay_unstable = (\n  props: RatingDisplayProps,\n  ref: React.Ref<HTMLDivElement>,\n): RatingDisplayState => {\n  const { color = 'neutral', count, compact = false, icon = StarFilled, max = 5, size = 'medium', value } = props;\n\n  const valueTextId = useId('rating-value-');\n  const countTextId = useId('rating-count-');\n\n  // Generate the child RatingItems and memoize them to prevent unnecessary re-rendering\n  const rootChildren = React.useMemo(() => {\n    return compact ? (\n      <RatingItem value={1} key={1} aria-hidden={true} />\n    ) : (\n      Array.from(Array(max), (_, i) => <RatingItem value={i + 1} key={i + 1} aria-hidden={true} />)\n    );\n  }, [compact, max]);\n\n  const state: RatingDisplayState = {\n    color,\n    compact,\n    icon,\n    max,\n    size,\n    value,\n    components: {\n      root: 'div',\n      valueText: 'span',\n      countText: 'span',\n    },\n    root: slot.always(\n      getIntrinsicElementProps('div', {\n        ref,\n        children: rootChildren,\n        role: 'img',\n        ...props,\n      }),\n      { elementType: 'div' },\n    ),\n    valueText: slot.optional(props.valueText, {\n      renderByDefault: value !== undefined,\n      defaultProps: { children: value, id: valueTextId, 'aria-hidden': true },\n      elementType: 'span',\n    }),\n    countText: slot.optional(props.countText, {\n      renderByDefault: count !== undefined,\n      defaultProps: { children: count?.toLocaleString(), id: countTextId, 'aria-hidden': true },\n      elementType: 'span',\n    }),\n  };\n  if (!state.root['aria-label'] && !state.root['aria-labelledby']) {\n    state.root['aria-labelledby'] = [state.valueText?.id, state.countText?.id].filter(Boolean).join(' ');\n  }\n  return state;\n};\n"],"names":["useRatingDisplay_unstable","props","ref","color","count","compact","icon","StarFilled","max","size","value","valueTextId","useId","countTextId","rootChildren","React","useMemo","createElement","RatingItem","key","aria-hidden","Array","from","_","i","state","components","root","valueText","countText","slot","always","getIntrinsicElementProps","children","role","elementType","optional","renderByDefault","undefined","defaultProps","id","toLocaleString","filter","Boolean","join"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAeaA;;;eAAAA;;;;iEAfU;gCAC+B;4BAE3B;4BACA;AAWpB,MAAMA,4BAA4B,CACvCC,OACAC;IAEA,MAAM,EAAEC,QAAQ,SAAS,EAAEC,KAAK,EAAEC,UAAU,KAAK,EAAEC,OAAOC,sBAAU,EAAEC,MAAM,CAAC,EAAEC,OAAO,QAAQ,EAAEC,KAAK,EAAE,GAAGT;IAE1G,MAAMU,cAAcC,IAAAA,qBAAAA,EAAM;IAC1B,MAAMC,cAAcD,IAAAA,qBAAAA,EAAM;IAE1B,sFAAsF;IACtF,MAAME,eAAeC,OAAMC,OAAO,CAAC;QACjC,OAAOX,UAAAA,WAAAA,GACLU,OAAAE,aAAA,CAACC,sBAAAA,EAAAA;YAAWR,OAAO;YAAGS,KAAK;YAAGC,eAAa;aAE3CC,MAAMC,IAAI,CAACD,MAAMb,MAAM,CAACe,GAAGC,IAAAA,WAAAA,GAAMT,OAAAE,aAAA,CAACC,sBAAAA,EAAAA;gBAAWR,OAAOc,IAAI;gBAAGL,KAAKK,IAAI;gBAAGJ,eAAa;;IAExF,GAAG;QAACf;QAASG;KAAI;IAEjB,MAAMiB,QAA4B;QAChCtB;QACAE;QACAC;QACAE;QACAC;QACAC;QACAgB,YAAY;YACVC,MAAM;YACNC,WAAW;YACXC,WAAW;QACb;QACAF,MAAMG,oBAAAA,CAAKC,MAAM,CACfC,IAAAA,wCAAAA,EAAyB,OAAO;YAC9B9B;YACA+B,UAAUnB;YACVoB,MAAM;YACN,GAAGjC,KAAK;QACV,IACA;YAAEkC,aAAa;QAAM;QAEvBP,WAAWE,oBAAAA,CAAKM,QAAQ,CAACnC,MAAM2B,SAAS,EAAE;YACxCS,iBAAiB3B,UAAU4B;YAC3BC,cAAc;gBAAEN,UAAUvB;gBAAO8B,IAAI7B;gBAAa,eAAe;YAAK;YACtEwB,aAAa;QACf;QACAN,WAAWC,oBAAAA,CAAKM,QAAQ,CAACnC,MAAM4B,SAAS,EAAE;YACxCQ,iBAAiBjC,UAAUkC;YAC3BC,cAAc;gBAAEN,UAAU7B,UAAAA,QAAAA,UAAAA,KAAAA,IAAAA,KAAAA,IAAAA,MAAOqC,cAAc;gBAAID,IAAI3B;gBAAa,eAAe;YAAK;YACxFsB,aAAa;QACf;IACF;IACA,IAAI,CAACV,MAAME,IAAI,CAAC,aAAa,IAAI,CAACF,MAAME,IAAI,CAAC,kBAAkB,EAAE;YAC9BF,kBAAqBA;QAAtDA,MAAME,IAAI,CAAC,kBAAkB,GAAG;YAACF,CAAAA,mBAAAA,MAAMG,SAAS,AAATA,MAAS,QAAfH,qBAAAA,KAAAA,IAAAA,KAAAA,IAAAA,iBAAiBe,EAAE;YAAEf,CAAAA,mBAAAA,MAAMI,SAAS,AAATA,MAAS,QAAfJ,qBAAAA,KAAAA,IAAAA,KAAAA,IAAAA,iBAAiBe,EAAE;SAAC,CAACE,MAAM,CAACC,SAASC,IAAI,CAAC;IAClG;IACA,OAAOnB;AACT"}