{"version":3,"file":"injectDevTools.esm.js","sources":["../../../../packages/core/src/devtools/injectDevTools.ts"],"sourcesContent":["import { SEQUENCE_PREFIX, DEBUG_RESET_CLASSES } from '../constants';\nimport { mergeDebugSequence } from './mergeDebugSequence';\n\nexport function injectDevTools(document: Document) {\n  const window = document.defaultView;\n  if (!window || window.__GRIFFEL_DEVTOOLS__) {\n    return;\n  }\n\n  const devtools: (typeof window)['__GRIFFEL_DEVTOOLS__'] = {\n    getInfo: (element: HTMLElement) => {\n      let rootDebugSequenceHash: string | undefined;\n      let rootResetDebugClassName: string | undefined;\n\n      for (const className of element.classList) {\n        if (className.startsWith(SEQUENCE_PREFIX)) {\n          rootDebugSequenceHash = className;\n        }\n        if (DEBUG_RESET_CLASSES[className]) {\n          rootResetDebugClassName = className;\n        }\n      }\n\n      return mergeDebugSequence(rootDebugSequenceHash, rootResetDebugClassName);\n    },\n  };\n\n  Object.defineProperty(window, '__GRIFFEL_DEVTOOLS__', {\n    configurable: false,\n    enumerable: false,\n    get() {\n      return devtools;\n    },\n  });\n}\n"],"names":["injectDevTools","document","window","defaultView","__GRIFFEL_DEVTOOLS__","devtools","getInfo","element","rootDebugSequenceHash","rootResetDebugClassName","className","classList","startsWith","SEQUENCE_PREFIX","DEBUG_RESET_CLASSES","mergeDebugSequence","Object","defineProperty","configurable","enumerable","get"],"mappings":";;;AAGM,SAAUA,cAAcA,CAACC,QAAkB,EAAA;AAC/C,EAAA,MAAMC,MAAM,GAAGD,QAAQ,CAACE,WAAW,CAAA;AACnC,EAAA,IAAI,CAACD,MAAM,IAAIA,MAAM,CAACE,oBAAoB,EAAE;AAC1C,IAAA,OAAA;AACF,GAAA;AAEA,EAAA,MAAMC,QAAQ,GAA4C;IACxDC,OAAO,EAAGC,OAAoB,IAAI;AAChC,MAAA,IAAIC,qBAAyC,CAAA;AAC7C,MAAA,IAAIC,uBAA2C,CAAA;AAE/C,MAAA,KAAK,MAAMC,SAAS,IAAIH,OAAO,CAACI,SAAS,EAAE;AACzC,QAAA,IAAID,SAAS,CAACE,UAAU,CAACC,eAAe,CAAC,EAAE;AACzCL,UAAAA,qBAAqB,GAAGE,SAAS,CAAA;AACnC,SAAA;AACA,QAAA,IAAII,mBAAmB,CAACJ,SAAS,CAAC,EAAE;AAClCD,UAAAA,uBAAuB,GAAGC,SAAS,CAAA;AACrC,SAAA;AACF,OAAA;AAEA,MAAA,OAAOK,kBAAkB,CAACP,qBAAqB,EAAEC,uBAAuB,CAAC,CAAA;AAC3E,KAAA;GACD,CAAA;AAEDO,EAAAA,MAAM,CAACC,cAAc,CAACf,MAAM,EAAE,sBAAsB,EAAE;AACpDgB,IAAAA,YAAY,EAAE,KAAK;AACnBC,IAAAA,UAAU,EAAE,KAAK;AACjBC,IAAAA,GAAGA,GAAA;AACD,MAAA,OAAOf,QAAQ,CAAA;AACjB,KAAA;AACD,GAAA,CAAC,CAAA;AACJ;;;;"}